<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Humanitarian Exchange Language &bull; rhxl</title><!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous"><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet"><script src="jquery.sticky-kit.min.js"></script><script src="pkgdown.js"></script><!-- mathjax --><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">rhxl</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    

    
    
<div class="contents">
<!-- README.md is generated from README.Rmd. Please edit that file -->
<div id="humanitarian-exchange-language-in-r" class="section level1">
<div class="page-header"><h1 class="hasAnchor"><a href="#humanitarian-exchange-language-in-r" class="anchor"> </a>Humanitarian Exchange Language in R</h1></div>

<p>The goal of this package is to provide functions to handle datasets with HXL tags. It is currently work in progress. If you have any ideas on how to further develop the package, please feel free to open an issue or a pull request.</p>
<blockquote>
<p>HXL is a different kind of data standard, designed to improve information sharing during a humanitarian crisis without adding extra reporting burdens. <a href="http://hxlstandard.org/standard/1_0final/">hxlstandard.org</a></p>
</blockquote>
<div id="install" class="section level2">
<h2 class="hasAnchor"><a href="#install" class="anchor"> </a>Install</h2>
<p>To install the current development version use devtools:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">devtools::<span class="kw">install_github</span>(<span class="st">"dirkschumacher/rhxl"</span>)</code></pre></div>
</div>
<div id="example" class="section level2">
<h2 class="hasAnchor"><a href="#example" class="anchor"> </a>Example</h2>
<p>Read in the aiports of Viet Nam.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">data_url &lt;-<span class="st"> "http://ourairports.com/countries/VN/airports.hxl"</span>
hxl_data &lt;-<span class="st"> </span><span class="kw"><a href="reference/as_hxl.html">as_hxl</a></span>(<span class="kw">read.csv</span>(data_url))
<span class="kw">head</span>(hxl_data)
<span class="co">#&gt; # A tibble: 6 &times; 20</span>
<span class="co">#&gt;      id ident           type                               name</span>
<span class="co">#&gt;   &lt;int&gt; &lt;chr&gt;          &lt;chr&gt;                              &lt;chr&gt;</span>
<span class="co">#&gt; 1 26708  VVTS  large_airport Tan Son Nhat International Airport</span>
<span class="co">#&gt; 2 26700  VVNB  large_airport      Noi Bai International Airport</span>
<span class="co">#&gt; 3 26697  VVDN  large_airport      Da Nang International Airport</span>
<span class="co">#&gt; 4 26693  VVCR medium_airport                   Cam Ranh Airport</span>
<span class="co">#&gt; 5 26705  VVPQ medium_airport     Phu Quoc International Airport</span>
<span class="co">#&gt; 6 26702  VVPB medium_airport                    Phu Bai Airport</span>
<span class="co">#&gt; # ... with 16 more variables: latitude_deg &lt;dbl&gt;, longitude_deg &lt;dbl&gt;,</span>
<span class="co">#&gt; #   elevation_ft &lt;int&gt;, continent &lt;chr&gt;, iso_country &lt;chr&gt;,</span>
<span class="co">#&gt; #   iso_region &lt;chr&gt;, municipality &lt;chr&gt;, scheduled_service &lt;int&gt;,</span>
<span class="co">#&gt; #   gps_code &lt;chr&gt;, iata_code &lt;chr&gt;, local_code &lt;chr&gt;, home_link &lt;chr&gt;,</span>
<span class="co">#&gt; #   wikipedia_link &lt;chr&gt;, keywords &lt;chr&gt;, score &lt;int&gt;, last_updated &lt;dttm&gt;</span></code></pre></div>
<p>You can get the schema as a tidy long table:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="reference/hxl_schema.html">hxl_schema</a></span>(hxl_data)
<span class="co">#&gt; # A tibble: 35 &times; 3</span>
<span class="co">#&gt;      tag attribute column_idx</span>
<span class="co">#&gt;    &lt;chr&gt;     &lt;chr&gt;      &lt;int&gt;</span>
<span class="co">#&gt; 1   meta        id          1</span>
<span class="co">#&gt; 2   meta      code          2</span>
<span class="co">#&gt; 3    loc   airport          3</span>
<span class="co">#&gt; 4    loc      type          3</span>
<span class="co">#&gt; 5    loc   airport          4</span>
<span class="co">#&gt; 6    loc      name          4</span>
<span class="co">#&gt; 7    geo       lat          5</span>
<span class="co">#&gt; 8    geo       lon          6</span>
<span class="co">#&gt; 9    geo elevation          7</span>
<span class="co">#&gt; 10   geo        ft          7</span>
<span class="co">#&gt; # ... with 25 more rows</span></code></pre></div>
<p>Or as a character vector in the order of the columns:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="reference/hxl_schema_chr.html">hxl_schema_chr</a></span>(hxl_data)
<span class="co">#&gt;  [1] "#meta +id"                  "#meta +code"               </span>
<span class="co">#&gt;  [3] "#loc +airport +type"        "#loc +airport +name"       </span>
<span class="co">#&gt;  [5] "#geo +lat"                  "#geo +lon"                 </span>
<span class="co">#&gt;  [7] "#geo +elevation +ft"        "#region +continent +code"  </span>
<span class="co">#&gt;  [9] "#country +code +iso2"       "#adm1 +code +iso"          </span>
<span class="co">#&gt; [11] "#loc +municipality +name"   "#status +scheduled"        </span>
<span class="co">#&gt; [13] "#loc +airport +code +gps"   "#loc +airport +code +iata" </span>
<span class="co">#&gt; [15] "#loc +airport +code +local" "#meta +url +airport"       </span>
<span class="co">#&gt; [17] "#meta +url +wikipedia"      "#meta +keywords"           </span>
<span class="co">#&gt; [19] "#meta +score"               "#date +updated"</span></code></pre></div>
<p>We can also test, if a dataset supports a schema. For example, we could test if the dataset has lat/lng coordinates.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="reference/hxl_validate.html">hxl_validate</a></span>(hxl_data, <span class="kw">c</span>(<span class="st">"#geo +lat"</span>, <span class="st">"#geo +lon"</span>))
<span class="co">#&gt; [1] TRUE</span></code></pre></div>
<p>With this information you could for example write a function that can automatically display a dataset on a map - without much configuration by the user. It also makes sharing of information easier.</p>
</div>
<div id="api" class="section level2">
<h2 class="hasAnchor"><a href="#api" class="anchor"> </a>API</h2>
<p>Currently more a draft, than a stable API. Happy to hear your thoughts.</p>
<div id="as_hxl" class="section level3">
<h3 class="hasAnchor"><a href="#as_hxl" class="anchor"> </a>as_hxl</h3>
<p><code>as_hxl</code>converts an object to an HXL data_frame. It returns a <code>tibble</code> with additional meta data for each column.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">data &lt;-<span class="st"> </span><span class="kw"><a href="reference/as_hxl.html">as_hxl</a></span>(readr::<span class="kw">read_csv</span>(<span class="st">"treatment_centers.csv"</span>))</code></pre></div>
</div>
<div id="schema" class="section level3">
<h3 class="hasAnchor"><a href="#schema" class="anchor"> </a>schema</h3>
<p>Returns a data.frame describing the schema. It maps tags/attributes to column indexes</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="reference/hxl_schema.html">hxl_schema</a></span>(hxl_table)</code></pre></div>
</div>
<div id="schema_chr" class="section level3">
<h3 class="hasAnchor"><a href="#schema_chr" class="anchor"> </a>schema_chr</h3>
<p>Returns a character sequence of tags/attributes in the order of columns of the original data.frame.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="reference/hxl_schema_chr.html">hxl_schema_chr</a></span>(hxl_table)</code></pre></div>
</div>
<div id="validate" class="section level3">
<h3 class="hasAnchor"><a href="#validate" class="anchor"> </a>validate</h3>
<p>Validate an HXL data_frame against a schema. Returns a boolean if it matches the schema.</p>
<p>Returns TRUE/FALSE if a table matches a schema.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="reference/hxl_validate.html">hxl_validate</a></span>(hxl_table, <span class="kw">c</span>(<span class="st">"#adm1"</span>, <span class="st">"#adm2"</span>, <span class="st">"#affected"</span>))</code></pre></div>
</div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>License</h2>
<p><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> + file <a href="LICENSE">LICENSE</a></p>
<h2>Developers</h2><ul class="list-unstyled"><li>Dirk Schumacher <br><small class="roles"> Author, maintainer, copyright&nbsp;holder </small> </li>
</ul><html><body><h2>Dev status</h2><ul class="list-unstyled"><li><a href="https://ci.appveyor.com/project/dirkschumacher/rhxl">
  <img src="https://ci.appveyor.com/api/projects/status/github/dirkschumacher/rhxl?branch=master&amp;svg=true" alt="AppVeyor Build Status"></a></li>
<li><a href="https://travis-ci.org/dirkschumacher/rhxl">
  <img src="https://travis-ci.org/dirkschumacher/rhxl.svg?branch=master" alt="Travis-CI Build Status"></a></li>
<li><a href="https://codecov.io/github/dirkschumacher/rhxl?branch=master">
  <img src="https://img.shields.io/codecov/c/github/dirkschumacher/rhxl/master.svg" alt="Coverage Status"></a></li>
<li><a href="https://cran.r-project.org/package=rhxl">
  <img src="http://www.r-pkg.org/badges/version/rhxl" alt="CRAN_Status_Badge"></a></li>
</ul></body></html></div>

</div>


      <footer><div class="copyright">
  <p>Developed by Dirk Schumacher.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer></div>

  </body></html>
